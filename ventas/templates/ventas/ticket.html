{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ticket de Venta</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body class="ticket-page">

<div class="ticket" id="ticket">
    <div class="center">
        <div class="bold">{{ negocio_nombre|default:"Punto de Venta" }}</div>
        <div>{{ negocio_direccion|default:"" }}</div>
        <div>Tel: <span id="ticket-telefono" data-default-telefono="2202643707">{{ negocio_telefono }}</span></div>
        <div class="line"></div>
        <div>Ticket: <span id="ticket-folio">{{ venta.id|stringformat:"05d" }}</span></div>
        <div>Fecha: <span id="ticket-fecha">{{ venta.fecha_hora|date:"Y-m-d" }}</span> <span id="ticket-hora">{{ venta.fecha_hora|date:"H:i" }}</span></div>
        <div>Cajero: <span id="ticket-cajero" data-default-cajero="1">{{ venta.vendedor.username }}</span></div>
    </div>

    <div class="line"></div>

    <table class="items">
        <thead>
        <tr>
            <th>Producto</th>
            <th>Cant</th>
            <th>P.U.</th>
            <th>Importe</th>
        </tr>
        </thead>
        <tbody>
        {% for detalle in venta.detalles.all %}
        <tr>
            <td>{{ detalle.producto.nombre }}</td>
            <td>{{ detalle.cantidad }}</td>
            <td>{{ detalle.precio_unitario|floatformat:2 }}</td>
            <td>{{ detalle.subtotal|floatformat:2 }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

    <div class="line"></div>

    <table class="totales">
        <tr>
            <td class="right bold">Subtotal:</td>
            <td class="right" id="ticket-subtotal">${{ venta.total|floatformat:2 }}</td>
        </tr>
        <tr>
            <td class="right bold">IVA:</td>
            <td class="right" id="ticket-iva">$0.00</td>
        </tr>
        <tr>
            <td class="right bold">TOTAL:</td>
            <td class="right bold" id="ticket-total">${{ venta.total|floatformat:2 }}</td>
        </tr>
        <tr>
            <td class="right bold">Pago:</td>
            <td class="right" id="ticket-pago">${{ venta.paga_con|default_if_none:"" }}</td>
        </tr>
        <tr>
            <td class="right bold">Cambio:</td>
            <td class="right" id="ticket-cambio">${{ venta.cambio|default_if_none:"" }}</td>
        </tr>
    </table>

    <div class="center small">
        Â¡Gracias por su compra!
    </div>
</div>

<div class="ticket-actions">
    <button class="btn primary" id="btn-descargar" onclick="descargarTicket()">Descargar ticket</button>
    <button class="btn secondary" id="btn-salir" data-salir-url="{% url 'ventas:punto_venta' %}">Salir</button>
</div>

<script src="{% static 'js/ticket.js' %}"></script>
</body>
</html>
